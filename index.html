<!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01 Transitional//EN'>
<html lang="ja">

<head>
    <meta http-equiv='Content-Type' content='text/html; charset=utf-8'>
    <meta name='author' content='ChatGPT'>
    <title>Text Comparison Tool</title>
    <script type='text/javascript'>
        // 文字単位の差分検出ロジック
        function getCharDifferences(text1, text2) {
            const len1 = text1.length;
            const len2 = text2.length;

            // 差分の結果を保持
            let result1 = '';
            let result2 = '';

            // インデックスを管理
            let i = 0, j = 0;

            while (i < len1 || j < len2) {
                if (i < len1 && j < len2 && text1[i] === text2[j]) {
                    // 一致する場合
                    result1 += text1[i];
                    result2 += text2[j];
                    i++;
                    j++;
                } else {
                    if (i < len1) {
                        // text1にしか存在しない文字を強調
                        result1 += `<span class="highlight-diff">${text1[i]}</span>`;
                        i++;
                    }
                    if (j < len2) {
                        // text2にしか存在しない文字を強調
                        result2 += `<span class="highlight-diff">${text2[j]}</span>`;
                        j++;
                    }
                }
            }
            return { highlighted1: result1, highlighted2: result2 };
        }

        // テキスト比較の実行
        function compareTexts() {
            const text1 = document.getElementById("text1").value.trim();
            const text2 = document.getElementById("text2").value.trim();

            const { highlighted1, highlighted2 } = getCharDifferences(text1, text2);

            document.getElementById("output1").innerHTML = highlighted1;
            document.getElementById("output2").innerHTML = highlighted2;
        }
    </script>
    <style type='text/css'>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        textarea {
            width: 45%;
            height: 200px;
            margin-bottom: 10px;
        }
        .output {
            width: 45%;
            padding: 10px;
            border: 1px solid #ddd;
            background: #f9f9f9;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        .highlight-diff {
            color: red;
            font-weight: bold;
        }
        .description {
            margin-top: 20px;
            font-size: 14px;
            color: #333;
        }
    </style>
</head>

<body>
    <h1>Text Comparison Tool</h1>
    <div style="display: flex; justify-content: space-between;">
        <textarea id="text1" placeholder="メモを入力してください"></textarea>
        <textarea id="text2" placeholder="原稿を入力してください"></textarea>
    </div>
    <button onclick="compareTexts()">比較する</button>
    <div style="display: flex; justify-content: space-between; margin-top: 20px;">
        <div id="output1" class="output"></div>
        <div id="output2" class="output"></div>
    </div>
    <div class="description">
        <p>※ 比較結果で<strong>赤色</strong>に強調表示されている部分は、テキスト間で異なる箇所を表しています。</p>
        <p>左側が「メモ」の比較結果、右側が「原稿」の比較結果です。</p>
    </div>
</body>

</html>
